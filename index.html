<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Life & Erbah</title>

<style>
body{
  margin:0;
  background:#0b0f14;
  color:#fff;
  font-family:Arial;
  text-align:center;
}

h2{margin:10px}

#gameContainer{
  width:100%;
  max-width:420px;
  height:520px;
  margin:10px auto;
  background:linear-gradient(#101820,#05070a);
  position:relative;
  overflow:hidden;
  border-radius:16px;
  box-shadow:0 0 25px #00ffff55;
}

/* خلفية متحركة */
.bg{
  position:absolute;
  inset:0;
  background:
    repeating-linear-gradient(
      90deg,
      #0f1c2d 0px,
      #0f1c2d 40px,
      #08111c 40px,
      #08111c 80px
    );
  opacity:0.4;
}

/* الكرة */
#player{
  width:40px;
  height:40px;
  background:radial-gradient(circle at 30% 30%, #7fffff, #00cccc);
  position:absolute;
  bottom:30px;
  left:70px;
  border-radius:50%;
  box-shadow:0 0 15px #00ffff;
}

/* عقبات بسيطة */
.obstacle{
  position:absolute;
  bottom:30px;
  width:38px;
  height:55px;
  background:#ff3b3b;
  border-radius:6px;
  box-shadow:0 0 10px #ff3b3b66;
}

#hud{
  position:absolute;
  top:10px;
  left:0;
  right:0;
  display:flex;
  justify-content:space-around;
  font-size:16px;
  z-index:5;
}

.screen{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.88);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
}

button{
  padding:12px 28px;
  font-size:18px;
  border:none;
  border-radius:10px;
  background:#00ffff;
  cursor:pointer;
  margin-top:10px;
}

.logo{
  font-size:26px;
  margin-bottom:20px;
  color:#00ffff;
  text-shadow:0 0 10px #00ffff;
}
</style>
</head>

<body>

<h2>Life & Erbah</h2>

<div id="gameContainer">
  <div class="bg" id="bg"></div>

  <div id="hud">
    <div>Score: <span id="score">0</span></div>
    <div>Best: <span id="best">0</span></div>
  </div>

  <div id="player"></div>

  <div id="startScreen" class="screen">
    <div class="logo">⚡ Zain Abdelhay ⚡</div>
    <button onclick="startGame()">Start Game</button>
  </div>

  <div id="gameOverScreen" class="screen" style="display:none;">
    <h1>Game Over</h1>
    <p id="finalScore"></p>
    <button onclick="startGame()">Play Again</button>
  </div>
</div>

<script>
const player = document.getElementById("player");
const game = document.getElementById("gameContainer");
const scoreEl = document.getElementById("score");
const bestEl = document.getElementById("best");
const startScreen = document.getElementById("startScreen");
const gameOverScreen = document.getElementById("gameOverScreen");
const finalScore = document.getElementById("finalScore");
const bg = document.getElementById("bg");

let velocity = 0;
let gravity = 0.6;
let jumpPower = 13;
let ground = 30;

let obstacles = [];
let speed = 3;
let score = 0;
let best = localStorage.getItem("best") || 0;
bestEl.innerText = best;

let running = false;
let loop;
let spawnTimer = 0;
let distanceTimer = 0;
let rotation = 0;

function startGame(){
  obstacles.forEach(o=>o.remove());
  obstacles = [];
  score = 0;
  speed = 3;
  velocity = 0;
  rotation = 0;
  player.style.bottom = ground+"px";
  player.style.transform = "rotate(0deg)";
  spawnTimer = 0;
  distanceTimer = 0;

  scoreEl.innerText = 0;
  startScreen.style.display="none";
  gameOverScreen.style.display="none";

  running = true;
  loop = setInterval(update,20);
}

function update(){
  /* خلفية */
  bg.style.backgroundPositionX = (Date.now()/25)%80+"px";

  /* فيزياء القفز */
  velocity -= gravity;
  let bottom = parseFloat(player.style.bottom);
  bottom += velocity;
  if(bottom<=ground){
    bottom=ground;
    velocity=0;
  }
  player.style.bottom = bottom+"px";

  /* دوران الكرة */
  if(running && bottom === ground){
    rotation += speed * 2;
    player.style.transform = `rotate(${rotation}deg)`;
  }

  /* السكور يزيد مع الركض */
  distanceTimer++;
  if(distanceTimer % 5 === 0){
    score++;
    scoreEl.innerText = score;

    if(score % 100 === 0) speed += 0.4;
  }

  /* توليد العقبات (مسافة منطقية) */
  spawnTimer++;
  if(spawnTimer > 80 + Math.random()*50){
    spawnObstacle();
    spawnTimer = 0;
  }

  /* تحريك العقبات */
  obstacles.forEach((o,i)=>{
    let right = parseFloat(o.style.right);
    right += speed;
    o.style.right = right+"px";

    if(right > 480){
      o.remove();
      obstacles.splice(i,1);
    }

    checkCollision(o);
  });
}

function spawnObstacle(){
  const o = document.createElement("div");
  o.className = "obstacle";
  o.style.right = "-60px";
  game.appendChild(o);
  obstacles.push(o);
}

function jump(){
  if(velocity===0 && running){
    velocity = jumpPower;
  }
}

function checkCollision(o){
  const p = player.getBoundingClientRect();
  const ob = o.getBoundingClientRect();

  if(
    p.right > ob.left+6 &&
    p.left < ob.right-6 &&
    p.bottom > ob.top+6
  ){
    endGame();
  }
}

function endGame(){
  clearInterval(loop);
  running=false;

  if(score>best){
    best=score;
    localStorage.setItem("best",best);
    bestEl.innerText = best;
  }

  finalScore.innerText = "Score: "+score;
  if(navigator.vibrate) navigator.vibrate(120);
  gameOverScreen.style.display="flex";
}

document.addEventListener("touchstart",jump);
document.addEventListener("mousedown",jump);
</script>

</body>
</html>
